<html>
  <head>
    <title>Garden of Forking Paths</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/lib/awsm.min.css">
    <style>
      *[hidden]{
        display: none;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Garden of forking paths</h1>
      <h2>A collaborative text adventure development tool</h2>
    <nav id="nav">
      <ul>
        <li v-if="!loggedIn">
          <button type="button" @click="showLogin">Log in</button>
        </li>
        <li v-if="!loggedIn">
          <button type="button" @click="showSignup">Sign up</button>
        </li>
        <li v-if="loggedIn">
          <button type="button" @click="logout">Log out</button>
        </li>
        <li v-if="currentUser.isFool">
          <button type="button">Fool mode</button>
        </li>
        <li v-if="currentUser.isWizard">
          <button type="button">Wizard mode</button>
        </li>
        <li v-if="currentUser">
            <img :src="currentUser.avatar" /><span>{{ currentUser.name }}</span>
        </li>
      </ul>
    </nav>
    </header>
    <main id="main">
      <form v-if="loginp">
        <fieldset>
          <legend>Log in</legend>
          <label for="login-email">Email</label>
          <input type="text" id="login-email" name="email" placeholder="name@example.com">
          <label for="login-password">Pass phrase</label>
          <input type="password" id="login-password" name="password">
          <button type="button" @click="login">Login</button>
        </fieldset>
      </form>

      <form v-if="signupp">
        <fieldset>
          <legend>Sign Up</legend>
          <label for="signup-name">Name</label>
          <input type="text" id="signup-name" name="name" placeholder="Friendly Waterbear">
          <label for="signup-email">Email</label>
          <input type="text" id="signup-email" name="email" placeholder="name@example.com">
          <label for="signup-password">Password</label>
          <input type="password" id="signup-password" name="password">
          <button type="button" @click="signup">Sign up</button>
        </fieldset>
      </form>

      <form id="edit-character" hidden>
        <details>
        <summary><h4>Edit Character</h4></summary>
        <select name="character" id="choose-character">
            <option value="">Choose a character to promote/demote/ban</option>
          </select>
        <fieldset>
          <legend>Who's who</legend>
          <label for="character-name-ui">Character</label>
          <output id="character-name-ui"></output>
          <label for="user-name-ui">Player</label>
          <output id="user-name-ui"></output>
          <label id="is-wizard-ui"><input type="checkbox" id="is-wizard" /> is a Wizard</label>
          <label id="is-banned-ui"><input type="checkbox" id="is-banned"> is Banned</label>
          <label id="is-fool-ui"><input type="checkbox" id="is-fool"> is a Fool</label>
          <button type="button" id="character-action">Save Character</button>
        </fieldset>
        </details>
      </form>

      <form id="edit-world" v-if="loggedIn">
        <details open>
          <summary><h4>Edit World</h4></summary>
        <select id="choose-world" v-on:change="chooseWorld">
          <option value="">Choose a world to edit</option>
          <option v-for="world in worlds" :value="world.id">{{world.name}}</option>
        </select>
        <strong>OR</strong>
        <button type="button" v-on:click="newWorld">Create a new world</button>
        <fieldset id="edit-world-ui" v-if="currentWorld">
          <legend>With great power comes great responsibility</legend>
          <label for="world-name">Name</label>
          <input type="text" id="world-name" :value="currentWorld.name"/>
          <label for="world-summary">Summary</label>
          <input type="text" id="world-summary" :value="currentWorld.summary" placeholder="Short description of world" />
          <label for="world-description">Description</label>
          <textarea id="world-description">{{currentWorld.description}}</textarea>
          <input type="hidden" id="world-id" :value="currentWorld.id">
          <label for="world-starting-room" v-if="currentWorld.rooms">Choose a starting room</label>
          <input type="text" id="world-starting-room" v-if="currentWorld.rooms" list="room-list">
          <button type="button" id="world-action">Save World</button>
        </fieldset>
      </details>
      </form>

  <form id="edit-room" v-if="currentWorld._id">
    <details open>
      <summary>
        <h4>Edit Room</h4>
      </summary>
        <select id="choose-room" v-on:change="chooseRoom">
          <option value="">Choose a room to edit</option>
          <option v-for="room in rooms" :value="room.id">{{room.name}}</option>
        </select>
        <strong>OR</strong>
        <button type="button" v-on:click="newRoom">Create a new room</button>
        <select>
        </select>
        <input type="text" list="room-list" id="choose-room">
        <fieldset id="edit-room-ui" v-if="currentRoom">
          <legend>Rooms are where it all happens</legend>
        <p>Filter
          <label><input type="radio" name="choose-room-filter" id="choose-room-filter-all" value="all" checked>All</label>
          <label><input type="radio" name="choose-room-filter" id="choose-room-filter-orphaned" value="orphaned">Orphaned</label>
          <label><input type="radio" name="choose-room-filter" id="choose-room-filter-deadend" value="deadend">Dead End</label>
        </p>
          <label for="room-name">Name</label>
          <input type="text" id="room-name" :value="currentRoom.name"/>
          <label for="room-summary">Summary</label>
          <input type="text" id="room-summary" :value="currentRoom.summary" />
          <label for="room-description">Description</label>
          <textarea id="room-description">{{currentRoom.description}}</textarea>
          <label for="room-notes">Design Notes (won't be shown to players)</label>
          <textarea id="room-notes">{{currentRoom.notes}}</textarea>
          <input type="hidden" id="room-id" :value="currentRoom.id">
          <fieldset>
            <legend>Exits</legend>
              <ul id="exits-ui">
                <li v-for="exit in currentRoom.exits">
                  <label>Name
                  <input type="text" placeholder="North" :value="exit.name"/>
                  </label>
                  <label>Destination
                    <select>
                      <option value="">Choose a room</option>
                      <option v-for="room in rooms" :value="room._id" :selected="room._id === exit.room">{{room.name}}</option>
                    </select>
                    <input type="text" list="room-list" :value="exit.room"/>
                  </label>
                </ul>
                </fieldset>
          <button type="button" id="room-action">Save Room</button>
        </fieldset>
        </details>
      </form>
    </main>
    <aside>
      Live game will go here.
    </aside>
    <footer>
      <a href="https://github.com/dethe/garden">Project on Github</a>
    </footer>
    <script src="/lib/bliss.min.js"></script>
    <script src="/lib/featherjs-client-3.0.0.js"></script>
    <script src="/lib/vue.js"></script>
    <script src="/lib/socket.io.js"></script>
    <script src="/js/client.js"></script>
  </body>
</html>
